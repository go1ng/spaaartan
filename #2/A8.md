# A8. 크로스 사이트 요청 변조(CSRF)
Cross-Site Request Forgery (CSRF)
- 공격자에 의해 사용자가 의도하지 않은 악의적인 행위를 서버에 요청
- 공격자가 입력한 악의적인 스크립트 코드에 접근
- 사용자의 웹 브라우저가 웹 서버에 악의적인 요청을 전송
- 웹 서버는 변조된 요청에 응답
- 사용자가 공격의 매개물로 공격자를 대신하여 악의적인 요청을 전송하게 되는 것

## #22 비밀번호 변경/비밀번호 힌트 변경/계좌 이체

### Change Password
변경하고자 하는 패스워드를 입력하고 요청을 보내 Burp Suite에서 전달되는 변수가 포함된 URL을 복사한다.
이후 **HTMLi-Stored(Blog)** 로 이동하여 복사한 URL을 `img` 태그에 `src` 속성에 넣고 이미지 크기를 0으로 하여 게시물을 등록한다.
**SQLi-Login Form/User** 로 이동하여 패스워드가 변경된 것을 확인한다.
이미지를 페이지에 출력시키기 위해 해당 경로에 접근할 때 요청이 정상적으로 전달되기 때문일 것이다.
이를 통해 공격자의 스크립트를 희생자가 대신 요청을 전송하는 것을 확인할 수 있다.

#### (Medium/High)
현재 패스워드를 입력받아 데이터베이스에서 사용자의 정보를 확인한 후에 변경할 수 있도록 한다.

### Change Secret
변경할 Secret 값을 입력하고 요청을 보내 Burp Suite에서 Body 부분에 전달되는 변수를 가지고 해당 페이지의 URL를 GET 방식으로 요청하는 것처럼 URL을 만들어 복사한다.
이후 **Change Password** 와 같은 방식으로 게시물을 등록하고 변경된 것을 확인한다.

#### (Medium/High)
세션의 무작위로 생성되는 토큰 변수값을 사용하여 사용자를 확인한 후에 변경을 진행한다.

### Transfer Amount
계좌번호와 금액이 입력된 GET 방식의 요청 URL을 복사하여 **Blog** 에 패스워드 변경 때와 동일하게 작업한다.
블로그에 접속할 때마다 입력한 금액만큼 계좌의 잔액이 줄어드는 것으로 보아 요청이 정상적으로 전달되는 것을 알 수 있다.

음수값을 입력할 때 잔액이 늘어나는 것을 볼 수 있는데, 이것은 입력된 금액의 부호를 확인하지 않고  + 연산만을 수행하기 때문일 것으로 추측된다.
